<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For My Queen Subu ❤️</title>
    <style>
        :root {
            --primary-pink: #ff4d6d;
            --soft-pink: #ffb3c1;
            --deep-red: #800020;
        }

        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            font-family: 'Georgia', serif;
            overflow: hidden;
            background-color: #1a0005;
        }

        /* --- HEARTBEAT ANIMATION --- */
        @keyframes heartbeat {
            0% { transform: scale(1); }
            15% { transform: scale(1.25); }
            30% { transform: scale(1); }
            45% { transform: scale(1.15); }
            60% { transform: scale(1); }
        }

        /* Applying heartbeat to specific emojis */
        .heart-beat-inline {
            display: inline-block;
            animation: heartbeat 1.2s infinite;
            color: var(--primary-pink);
            text-shadow: 0 0 10px var(--primary-pink);
        }

        .heart-bg {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .section {
            display: none;
            height: 100vh;
            width: 100vw;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background-size: cover;
            background-position: center;
            text-align: center;
            color: white;
            position: relative;
            z-index: 2;
        }

        .active { display: flex; }

        #sec1 { background-image: linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.4)), url('https://images.pexels.com/photos/756467/pexels-photo-756467.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2'); } 
        #sec2 { background-image: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('https://images.pexels.com/photos/1024960/pexels-photo-1024960.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2'); } 
        #sec3 { background-image: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('https://images.pexels.com/photos/40405/wedding-rings-rings-wedding-gold-40405.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2'); } 
        #sec4 { background: radial-gradient(circle, #ff4d6d, #4a000e); }
        #sec5 { background: #000; }

        .card {
            background: rgba(25, 0, 5, 0.88);
            padding: 40px;
            border-radius: 40px;
            border: 2px solid var(--soft-pink);
            box-shadow: 0 0 50px rgba(255, 77, 109, 0.4);
            width: 85%;
            max-width: 420px;
            backdrop-filter: blur(10px);
        }

        h2 { font-family: 'Arial Black', sans-serif; color: var(--soft-pink); letter-spacing: 4px; }

        input {
            padding: 15px; font-size: 1.1rem; border-radius: 15px; border: 2px solid var(--primary-pink);
            background: rgba(255,255,255,0.15); color: white; width: 80%; text-align: center; outline: none;
        }

        button {
            padding: 15px 40px; font-size: 1.1rem; background: linear-gradient(45deg, #ff4d6d, #c9184a);
            color: white; border: none; border-radius: 50px; cursor: pointer; margin-top: 25px;
            font-weight: bold; text-transform: uppercase; transition: 0.3s;
        }

        #custom-alert {
            display: none;
            position: fixed;
            top: 50%; left: 50%; transform: translate(-50%, -50%);
            background: #ffdb00; border: 6px solid #2d5da1; border-radius: 25px;
            padding: 30px; z-index: 3000; width: 300px; text-align: center;
            box-shadow: 0 0 100px rgba(0,0,0,0.8); color: #2d5da1;
        }

        #no-btn { position: absolute; transition: 0.1s linear; background: #555; z-index: 999; }

        .final-msg { position: absolute; z-index: 200; width: 100%; pointer-events: none; }

        .main-text {
            font-size: 3.5rem; font-weight: 900;
            background: linear-gradient(to bottom, #ffffff, var(--soft-pink), var(--primary-pink));
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            text-shadow: 0 10px 30px rgba(0,0,0,0.9); display: block;
        }

        .nepali-text {
            font-size: 2.2rem; color: var(--soft-pink); margin-top: 20px;
            display: block; text-shadow: 0 0 15px rgba(255, 77, 109, 0.8);
        }

        canvas { position: absolute; top: 0; left: 0; z-index: 100; }

        @keyframes floatUp {
            0% { transform: translateY(110vh) rotate(0deg); opacity: 0; }
            20% { opacity: 1; }
            100% { transform: translateY(-10vh) rotate(360deg); opacity: 0; }
        }
    </style>
</head>
<body>

    <div class="heart-bg" id="heartContainer"></div>

    <div id="custom-alert">
        <p style="font-weight: 900; font-size: 1.2rem;">PLEASE THINK HARDER MY LOVE, SUBU! <span class="heart-beat-inline">❤️</span></p>
        <button onclick="closeAlert()" style="background: #2d5da1; margin-top: 10px;">Retry</button>
    </div>

    <div id="sec1" class="section active">
        <div class="card">
            <h2>LEVEL 1</h2>
            <p>When is our anniversary?</p>
            <input type="text" id="ans1" placeholder="Type here...">
            <br>
            <button onclick="check1()">Unlock My Heart <span class="heart-beat-inline">❤️</span></button>
        </div>
    </div>

    <div id="sec2" class="section">
        <div class="card">
            <h2>LEVEL 2</h2>
            <p>What was the title of the last movie we watched together?</p>
            <input type="text" id="ans2" placeholder="Type here...">
            <br>
            <button onclick="check2()">Keep Going... <span class="heart-beat-inline">❤️</span></button>
        </div>
    </div>

    <div id="sec3" class="section">
        <div class="card">
            <h2>LEVEL 3</h2>
            <p>What was the first present I ever gave you?</p>
            <input type="text" id="ans3" placeholder="Type here...">
            <br>
            <button onclick="check3()">Final Step <span class="heart-beat-inline">❤️</span></button>
        </div>
    </div>

    <div id="sec4" class="section">
        <h1 style="font-size: 3rem; margin-bottom: 50px; text-shadow: 0 5px 15px rgba(0,0,0,0.5);">Subu, Will you be my Valentine? <span class="heart-beat-inline" style="font-size: 4rem;">❤️</span></h1>
        <div style="position: relative; width: 100%; height: 100px;">
            <button onclick="goFinal()" style="padding: 20px 80px; font-size: 2rem;">YES!</button>
            <button id="no-btn" onmouseover="moveNo()" onclick="moveNo()">NO</button>
        </div>
    </div>

    <div id="sec5" class="section">
        <canvas id="canvas"></canvas>
        <div class="final-msg">
            <span class="main-text">HAPPY VALENTINES MY LOVE</span>
            <span style="font-size: 1.8rem; color: white; display: block; margin-top: 10px;">I LOVE YOU SO MUCH SUBU <span class="heart-beat-inline">❤️</span></span>
            <span class="nepali-text">तिमी त मेरो परान हौ नि माया <span class="heart-beat-inline">❤️</span></span>
        </div>
    </div>

    <script>
        function createHearts() {
            const container = document.getElementById('heartContainer');
            setInterval(() => {
                const heart = document.createElement('div');
                heart.innerHTML = '❤️';
                heart.style.position = 'absolute';
                heart.style.left = Math.random() * 100 + 'vw';
                heart.style.fontSize = (Math.random() * 20 + 15) + 'px';
                heart.style.animation = `floatUp ${Math.random() * 3 + 4}s linear forwards`;
                container.appendChild(heart);
                setTimeout(() => heart.remove(), 6000);
            }, 300);
        }
        createHearts();

        function showAlert() { document.getElementById('custom-alert').style.display = 'block'; }
        function closeAlert() { document.getElementById('custom-alert').style.display = 'none'; }

        function check1() {
            if(document.getElementById('ans1').value.trim().toUpperCase() === "DECEMBER 14") next(1, 2);
            else showAlert();
        }
        function check2() {
            if(document.getElementById('ans2').value.trim().toUpperCase() === "KALKI") next(2, 3);
            else showAlert();
        }
        function check3() {
            if(document.getElementById('ans3').value.trim().toUpperCase() === "ROSE") next(3, 4);
            else showAlert();
        }

        function next(curr, nextIdx) {
            document.getElementById('sec' + curr).classList.remove('active');
            document.getElementById('sec' + nextIdx).classList.add('active');
        }

        function moveNo() {
            const btn = document.getElementById('no-btn');
            const x = Math.random() * (window.innerWidth - 120);
            const y = Math.random() * (window.innerHeight - 60);
            btn.style.position = 'fixed';
            btn.style.left = x + 'px';
            btn.style.top = y + 'px';
        }

        function goFinal() {
            next(4, 5);
            startEternalFireworks();
        }

        function startEternalFireworks() {
            const canvas = document.getElementById('canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            let particles = [];
            let fireworks = [];

            class Particle {
                constructor(x, y, color) {
                    this.x = x; this.y = y; this.color = color;
                    this.vx = (Math.random() - 0.5) * 14;
                    this.vy = (Math.random() - 0.5) * 14;
                    this.alpha = 1;
                }
                update() { this.x += this.vx; this.y += this.vy; this.alpha -= 0.015; }
                draw() {
                    ctx.globalAlpha = this.alpha;
                    ctx.fillStyle = this.color;
                    ctx.beginPath(); ctx.arc(this.x, this.y, 2.5, 0, Math.PI * 2); ctx.fill();
                }
            }

            class Firework {
                constructor() {
                    this.x = Math.random() * canvas.width;
                    this.y = canvas.height;
                    this.targetY = Math.random() * (canvas.height / 2.5);
                    this.color = `hsl(${Math.random() * 360}, 100%, 65%)`;
                    this.vel = -Math.random() * 3 - 10;
                    this.exploded = false;
                }
                update() {
                    this.y += this.vel;
                    if (this.y <= this.targetY) {
                        this.exploded = true;
                        for (let i = 0; i < 70; i++) particles.push(new Particle(this.x, this.y, this.color));
                    }
                }
                draw() {
                    ctx.fillStyle = "white";
                    ctx.fillRect(this.x, this.y, 2, 12);
                }
            }

            function animate() {
                ctx.fillStyle = 'rgba(0, 0, 0, 0.15)';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                if (Math.random() < 0.25) fireworks.push(new Firework()); 
                fireworks.forEach((f, i) => {
                    f.update(); f.draw();
                    if (f.exploded) fireworks.splice(i, 1);
                });
                particles.forEach((p, i) => {
                    p.update(); p.draw();
                    if (p.alpha <= 0) particles.splice(i, 1);
                });
                requestAnimationFrame(animate);
            }
            animate();
        }
    </script>
</body>
</html>